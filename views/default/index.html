{{extend 'layout.html'}}


<style>
  .ad {
    background-color: grey;
    height: 150px;
    padding: 15px;
    margin-bottom: 10px;
  }


</style>


{{block header}}
{{ if highlights or offers: }}
<div class="highlights_container">
  <h1>{{=T('Highlights')}}</h1>
  <div class="highlights">
    {{for highlight in highlights:}}
      <div class="highlight shadow-1" style="background-image: url({{=URL('static', 'uploads/'+highlight.bg_image)}})">
        <div class="data">
          <h2>{{=highlight.title}}</h2>
          <h4>{{=highlight.description}}</h4>
          <a href="{{=highlight.url}}" class="btn btn-block"> {{=T('Check it out')}} </a>
        </div>
      </div>
    {{pass}}
    {{for offer in offers:}}
      <div class="highlight shadow-1" style="background-image: url({{=URL('static', 'uploads/' + offer.bg_image)}})">
        <div class="data">
          <h2>{{=offer.name}}</h2>
          <p>{{=offer.starts_on.strftime('%a %d %B %Y')}} -  {{=offer.ends_on.strftime('%a %d %B %Y')}}</p>
          <a href="{{=URL('offer_group', 'get', args=offer.id)}}" class="btn btn-block"> {{=T('View discounts')}} </a>
        </div>
      </div>
    {{pass}}
  </div>
</div>
{{ pass }}

{{end}}




{{ if popular_items: }}
<h2>{{=T('Popular items')}}</h2>
<div class="items-container no-wrap">
  {{for popular_item in popular_items:}}
    {{=item_card(popular_item)}}
  {{pass}}
</div>
{{ pass }}

<h2>{{=T('New items')}}</h2>
<div class="items-container no-wrap">
  {{for new_item in new_items:}}
    {{=item_card(new_item)}}
  {{pass}}
</div>

{{ if stores: }}
<div class="highlights_container">
  <h2>{{=T('Stores')}}</h2>
  <div class="highlights">
    {{for store in stores:}}
      <div class="highlight shadow-1" style="background-image: url({{=URL('static', 'uploads/%s' % store.image) }})">
        <div class="data">
          <h2>{{=store.name}}</h2>
          <h4>{{=full_address(store.id_address)}}</h4>
          <a href="{{=store.map_url}}" class="btn btn-block" target="blank"> {{=T('Check map')}} </a>
        </div>
      </div>
    {{pass}}
  </div>
</div>
{{ pass }}

{{block page_js:}}
<script>
  $('.highlight').each(function (i, e) {
    $(e).css('min-width', Math.min(window.innerWidth - 30, 400) + 'px');
  })
</script>
{{end}}
